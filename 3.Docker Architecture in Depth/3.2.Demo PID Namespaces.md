## Demo PID Namespaces

Docker containers ichida **PID namespaces** qanday ishlashini tushunishga bag‚Äòishlangan ushbu qo‚Äòllanmaga xush kelibsiz.  
Ushbu darsda biz **Docker container** ichidagi ishlayotgan jarayonlarning **process IDs (PIDs)** ni **Docker host** dagilari bilan solishtirib ko‚Äòramiz.  
Bu tushuntirish sizga **container isolation** va **Docker**ning **process management**ni qanday boshqarishini yaxshiroq tushunishga yordam beradi.

---

### Understanding PID Namespaces

**Linux system**da **Docker** ishlayotgan bo‚Äòlsa, **Docker Engine** **host** sifatida faoliyat yuritadi  
va o‚Äòzining **root process (PID 1)** ga ega bo‚Äòladi.  

Siz **Docker container**ni ishga tushirganda, u **isolated process namespace** yaratadi.  
**Container** ichida esa, **container‚Äôs root process** **PID 1** sifatida belgilanadi,  
garchi **host** tizimida bu jarayon boshqa **PID** (masalan, **PID 5**) bilan qayd etilgan bo‚Äòlishi mumkin.  

Bu xatti-harakat ‚Äî **containerization**ning asosiy xususiyatlaridan biri bo‚Äòlib,  
u **containers** ichidagi jarayonlarning har biri o‚Äòzining mustaqil **process space**ida ishlayotgandek ko‚Äòrinishiga imkon beradi.

---

### Running the Tomcat Docker Container

Endi biz **Tomcat web server image**ni **Docker Hub** dan **pull** qilib olishdan boshlaymiz.  
Quyidagi buyruqlar **container**ni ishga tushirishning ikki keng tarqalgan usulini ko‚Äòrsatadi:

**1. Container**ni interaktiv tarzda ishga tushirish:
```bash
docker run -it --rm tomcat:8.0
```

**2. Container**ni **port publishing** (ya‚Äôni **container port 8080** ni **host port 8888** ga map qilish) bilan ishga tushirish:
```bash
docker run -it --rm -p 8888:8080 tomcat:8.0
```
Ikkinchi buyruqdan so‚Äòng, siz **Tomcat server**ga quyidagi manzil orqali murojaat qilishingiz mumkin:
```
http://{host-ip}:8888
```
Brauzer orqali ushbu URL‚Äôni ochganingizda, **Apache Tomcat**ning asosiy sahifasi chiqadi ‚Äî
bu esa **container** muvaffaqiyatli ishga tushganini tasdiqlaydi.

## Running in Detached Mode

Production yoki testing muhitida (environment) siz container‚Äôni **detached mode**da ishga tushirishni afzal ko‚Äòrishingiz mumkin. Quyidagi misolda ko‚Äòrsatilganidek, **-d** opsiyasidan foydalaning. Quyidagi log chiqishi (log output) **Tomcat server** ishga tushish jarayonidagi xabarlarni ko‚Äòrsatadi:

```
Using CLASSPATH: /usr/local/tomcat/bin/bootstrap.jar
18-Oct-2017 13:39:15.521 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server version: Apache Tomcat/8.0.47
18-Oct-2017 13:39:15.523 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server built: Sep 29 2017 13:46:41 UTC
18-Oct-2017 13:39:15.524 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server number: 8.0.47.0
18-Oct-2017 13:39:15.525 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Name: Linux
18-Oct-2017 13:39:15.526 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Version: 3.16.0-4-amd64
18-Oct-2017 13:39:15.527 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Architecture: amd64
18-Oct-2017 13:39:15.720 INFO [main] org.apache.catalina.core.AbstractProtocol.init Initializing ProtocolHandler ["ajp-bio-8009"]
18-Oct-2017 13:39:15.797 INFO [main] org.apache.catalina.core.StandardService.startInternal Starting service Catalina
18-Oct-2017 13:39:15.799 INFO [main] org.apache.catalina.startup.HostConfig.deployDirectory Deploying web application directory /usr/local/tomcat/webapps/host-manager
18-Oct-2017 13:39:16.932 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deploying web application directory /usr/local/tomcat/webapps/manager
18-Oct-2017 13:39:17.084 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deployment of web application directory /usr/local/tomcat/webapps/manager has finished in 24 ms
18-Oct-2017 13:39:17.108 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deployment of web application directory /usr/local/tomcat/webapps/ROOT has finished in 33 ms
18-Oct-2017 13:39:17.141 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deployment of web application directory /usr/local/tomcat/webapps/docs has finished in 37 ms
```

Container‚Äôni **detached mode** holatida ishga tushirgandan so‚Äòng, uning holatini `docker ps` buyrug‚Äòi yordamida tekshiring.  
Siz ro‚Äòyxatda **Apache Tomcat container** ni ko‚Äòrishingiz kerak ‚Äî bu uning ishlayotganini tasdiqlaydi.  
Shundan so‚Äòng, **web server** ga kirib, u to‚Äòliq ishlayotganini tekshirishingiz mumkin.

# Inspecting Processes with PID Namespaces

**PID namespace** misolini ko‚Äòrsatish uchun siz konteyner ichidagi jarayonlarni (`processes`) `docker exec` buyrug‚Äòi yordamida tekshirishingiz mumkin. Quyidagi misolda konteyner ID‚Äôsini (masalan, `"5a5f912e0f0e"` bilan boshlanadiganini) kerak bo‚Äòlsa almashtiring. Quyidagi buyruqlar ishlayotgan jarayonlarni ro‚Äòyxatlashni ko‚Äòrsatadi:

```bash
docker run -d --rm -p 8888:8080 tomcat:8.0
docker ps
docker exec 5a5f912e0f0e ps -eaf
ps -eaf | grep docker-java-home
```
Inside the container, `ps -eaf` buyrug‚Äòining natijasi `Tomcat` jarayoni (`process`) `PID 1` sifatida ishlayotganini ko‚Äòrsatadi.  
Ammo siz `Docker host` da shunga o‚Äòxshash buyruqni ishga tushirib, natijani `grep docker-java-home` orqali filtrlab ko‚Äòrsangiz,  
xuddi shu jarayonning boshqa `PID` ga ega ekanini kuzatasiz.  

Bu holat aniq ko‚Äòrsatadiki, `PID namespaces` yordamida **bitta jarayon (process)** turli **PID** larda ‚Äî  
ya‚Äôni bir marta o‚Äòz konteyneri ichida, boshqa safar esa **host tizimida** ‚Äî namoyon bo‚Äòlishi mumkin.

## Conclusion

Ushbu demo **Docker containers** ichidagi **PID namespaces** konseptini ko‚Äòrsatdi.  
**Containers** ichida **process IDs** ni izolyatsiya qilish orqali **Docker** har bir konteyner o‚Äòzining yagona **process space**‚Äôida ishlashini ta‚Äôminlaydi, garchi asosiy (host) tizimda bu jarayon boshqa **PID** ga ega bo‚Äòlishi mumkin.  

Bu ‚Äî **container security** va **process management**ning asosiy jihatlaridan biridir.  

**Happy Dockering!** üê≥
